# AI Content Engine - Project 02 | AI CODE PRO

[![AI CODE PRO](https://img.shields.io/badge/AI%20CODE%20PRO-Project%2002-blue)](https://cienciadosdados.com)
![Next.js](https://img.shields.io/badge/Next.js-16-black)
![Convex](https://img.shields.io/badge/Convex-Database-orange)
![Clerk](https://img.shields.io/badge/Clerk-Auth-blue)
![Inngest](https://img.shields.io/badge/Inngest-Workflows-purple)
![AssemblyAI](https://img.shields.io/badge/AssemblyAI-Transcription-green)
![YouTube](https://img.shields.io/badge/YouTube-Transcript-red)
![OpenAI](https://img.shields.io/badge/OpenAI-GPT-teal)

> **ğŸ¯ Project 02** do programa **AI CODE PRO** da [CiÃªncia dos Dados](https://cienciadosdados.com)

## Pare de Gastar Horas Extraindo InformaÃ§Ãµes de Podcasts - Deixe a IA Fazer!

FaÃ§a upload do seu podcast **ou cole um link do YouTube**. Receba conteÃºdo otimizado para 6 redes sociais automaticamente.

---

### ğŸ“Œ Para Quem Ã‰ Este Projeto

**Criadores de podcast afogados em trabalho de pÃ³s-produÃ§Ã£o**

VocÃª passou horas gravando, editando e produzindo seu podcast. Agora precisa:
- Escrever posts para 6 plataformas diferentes
- Criar tÃ­tulos e descriÃ§Ãµes atraentes
- Gerar timestamps para YouTube
- Encontrar os melhores momentos para clips
- Escrever legendas e hashtags

**Este app faz tudo isso em segundos.**

### ğŸ¯ Diferencial Principal

**Workflow completo de IA do upload ao conteÃºdo multi-plataforma**

NÃ£o Ã© apenas transcriÃ§Ã£o. NÃ£o Ã© apenas resumos. Ã‰ um sistema completo de distribuiÃ§Ã£o de conteÃºdo alimentado por IA que entende seu podcast e cria conteÃºdo personalizado para cada plataforma.

### âš¡ Destaque TÃ©cnico

**Processamento paralelo de IA com Inngest (5x mais rÃ¡pido que sequencial)**

Em vez de esperar 5 minutos para tarefas de IA rodarem uma por uma, executamos 6 jobs de geraÃ§Ã£o simultaneamente. Seu conteÃºdo fica pronto em ~90 segundos.

---

## ğŸ¤” O Que Ã‰ Este App?

Pense nele como **sua redaÃ§Ã£o de IA para conteÃºdo de podcast**.

ExplicaÃ§Ã£o simples:

1. **VocÃª faz upload** de um arquivo de Ã¡udio (seu episÃ³dio de podcast) **ou cola um link do YouTube**
2. **A IA analisa** seu conteÃºdo, entendendo speakers, tÃ³picos e momentos-chave
3. **VocÃª recebe** um pacote completo de distribuiÃ§Ã£o:
   - Resumo com insights principais
   - Posts para Twitter, LinkedIn, Instagram, TikTok, YouTube e Facebook
   - SugestÃµes de tÃ­tulos (curtos, longos, otimizados para SEO)
   - Hashtags especÃ­ficas por plataforma
   - Timestamps de capÃ­tulos para YouTube
   - Momentos-chave para clips virais
   - TranscriÃ§Ã£o completa com identificaÃ§Ã£o de speakers

**O workflow:** Gravar â†’ Upload (ou YouTube) â†’ IA Analisa â†’ Receber ConteÃºdo

Sem escrita manual. Sem copiar e colar entre plataformas. Sem adivinhar quais hashtags funcionam.

---

## ğŸ“ Sobre o AI CODE PRO

Este projeto faz parte do programa **AI CODE PRO** da [CiÃªncia dos Dados](https://cienciadosdados.com), onde construÃ­mos aplicaÃ§Ãµes completas utilizando IA e as tecnologias mais modernas do mercado.

### ğŸ’¡ O Que VocÃª Aprende

- **Next.js 16** - Server actions, app router, API routes e streaming
- **Bancos Real-time** - Convex para atualizaÃ§Ãµes instantÃ¢neas sem polling
- **IntegraÃ§Ãµes de IA** - OpenAI, AssemblyAI e prompt engineering
- **Background Jobs** - Inngest para workflows durÃ¡veis e observÃ¡veis
- **Auth & Billing Modernos** - Clerk com gestÃ£o de assinaturas
- **Deploy em ProduÃ§Ã£o** - Vercel, variÃ¡veis de ambiente e monitoramento

### ğŸ“… Projetos do AI CODE PRO

- **Project 01**: Fundamentos e setup inicial
- **Project 02**: AI Content Engine (este projeto)
- **Project 03+**: Projetos avanÃ§ados

### ğŸ‘‰ [Saiba mais em cienciadosdados.com](https://cienciadosdados.com)

---

## âœ¨ Features

### Para Criadores de Podcast

- **ğŸ¬ Suporte a YouTube** - Cole um link do YouTube e extraia transcriÃ§Ã£o automaticamente (sem precisar de Ã¡udio!)
- **ğŸ“ Resumo com IA** - VisÃ£o geral completa com bullets, insights principais e TL;DR
- **ğŸ“± Posts para Redes Sociais** - ConteÃºdo otimizado para 6 plataformas:
  - **Twitter** - 280 caracteres, direto e engajador
  - **LinkedIn** - Tom profissional, thought leadership
  - **Instagram** - Ganchos visuais com perguntas de engajamento
  - **TikTok** - Casual, trend-aware, Gen-Z friendly
  - **YouTube** - DescriÃ§Ã£o com CTAs e timestamps
  - **Facebook** - Focado em comunidade, iniciadores de conversa
- **ğŸ¯ SugestÃµes de TÃ­tulos** - 4 estilos diferentes para cada uso:
  - YouTube Curto (chamativo, menos de 60 chars)
  - YouTube Longo (descritivo, SEO-friendly)
  - TÃ­tulos de Podcast (focado no episÃ³dio)
  - Keywords SEO (descobribilidade)
- **#ï¸âƒ£ Hashtags** - Tags especÃ­ficas por plataforma otimizadas para alcance
- **â±ï¸ Timestamps YouTube** - Marcadores de capÃ­tulo gerados automaticamente
- **ğŸ¤ Momentos-Chave** - IA identifica oportunidades de clips virais com timestamps
- **ğŸ‘¥ DiarizaÃ§Ã£o de Speakers** - "Quem disse o quÃª" com labels e scores de confianÃ§a

### Features TÃ©cnicas

- **âš¡ Processamento Paralelo** - 6 jobs de IA rodam simultaneamente (60s total vs 300s sequencial)
- **ğŸ”„ AtualizaÃ§Ãµes Real-time** - Veja progresso ao vivo com Convex subscriptions (sem polling)
- **ğŸ›¡ï¸ Workflows DurÃ¡veis** - Inngest faz retry automÃ¡tico de steps falhos (sem perda de trabalho)
- **ğŸ“Š Feature Gating por Plano** - Features desbloqueiam baseado no tier (Free/Pro/Ultra)
- **ğŸ¨ Suporte Dark Mode** - UI bonita que adapta Ã  sua preferÃªncia
- **ğŸ“¦ Type-safe End-to-End** - TypeScript completo com validaÃ§Ã£o Zod
- **ğŸ” Seguro por PadrÃ£o** - AutenticaÃ§Ã£o Clerk com seguranÃ§a row-level

---

## ğŸ’° Planos de PreÃ§os

| Feature | FREE | PRO ($29/mÃªs) | ULTRA ($69/mÃªs) |
|---------|:----:|:------------:|:--------------:|
| **Projetos** | 3 lifetime | 30/mÃªs | Ilimitado |
| **Tamanho Arquivo** | 10 MB | 200 MB | 3 GB |
| **DuraÃ§Ã£o MÃ¡xima** | 10 min | 2 horas | Ilimitado |
| **Resumo IA** | âœ“ | âœ“ | âœ“ |
| **Posts Sociais** | âœ— | âœ“ | âœ“ |
| **TÃ­tulos & Hashtags** | âœ— | âœ“ | âœ“ |
| **Timestamps YouTube** | âœ— | âœ— | âœ“ |
| **Momentos-Chave** | âœ— | âœ— | âœ“ |
| **TranscriÃ§Ã£o Completa** | âœ— | âœ— | âœ“ |
| **DiarizaÃ§Ã£o de Speakers** | âœ— | âœ— | âœ“ |

---

## ğŸ”§ Como Funciona

### Stack de Tecnologias

```mermaid
flowchart TB
    subgraph Frontend["ğŸ–¥ï¸ Frontend"]
        NEXTJS[Next.js 16<br/>App Router + Server Actions]
        REACT[React 19<br/>Components + Hooks]
        TAILWIND[Tailwind CSS<br/>Styling + Dark Theme]
    end

    subgraph Auth["ğŸ” AutenticaÃ§Ã£o"]
        CLERK[Clerk<br/>Auth + Billing + Plans]
    end

    subgraph Database["ğŸ’¾ Banco de Dados"]
        CONVEX[Convex<br/>Real-time Database]
        BLOB[Vercel Blob<br/>File Storage]
    end

    subgraph Orchestration["âš™ï¸ OrquestraÃ§Ã£o"]
        INNGEST[Inngest<br/>Durable Workflows]
    end

    subgraph AI["ğŸ¤– InteligÃªncia Artificial"]
        OPENAI[OpenAI GPT-5<br/>Content Generation]
        ASSEMBLYAI[AssemblyAI<br/>Audio Transcription]
    end

    subgraph YouTube["ğŸ¬ YouTube"]
        PYTHON[Python Service<br/>Flask + youtube-transcript-api]
    end

    subgraph Deploy["ğŸš€ Deploy"]
        VERCEL[Vercel<br/>Hosting + Edge]
    end

    %% ConexÃµes
    NEXTJS --> CLERK
    NEXTJS --> CONVEX
    NEXTJS --> BLOB
    NEXTJS --> INNGEST
    NEXTJS --> PYTHON

    CLERK --> |"JWT Token"| NEXTJS
    CONVEX --> |"Real-time Updates"| REACT

    INNGEST --> ASSEMBLYAI
    INNGEST --> OPENAI
    INNGEST --> CONVEX

    PYTHON --> |"Transcript"| INNGEST

    NEXTJS --> VERCEL

    style Frontend fill:#1e293b,stroke:#10b981,color:#fff
    style Auth fill:#1e293b,stroke:#3b82f6,color:#fff
    style Database fill:#1e293b,stroke:#f97316,color:#fff
    style Orchestration fill:#1e293b,stroke:#a855f7,color:#fff
    style AI fill:#1e293b,stroke:#14b8a6,color:#fff
    style YouTube fill:#1e293b,stroke:#ef4444,color:#fff
    style Deploy fill:#1e293b,stroke:#6366f1,color:#fff
```

### Fluxo de Dados Entre ServiÃ§os

```mermaid
sequenceDiagram
    participant U as ğŸ‘¤ UsuÃ¡rio
    participant N as Next.js
    participant C as Clerk
    participant B as Vercel Blob
    participant P as Python Service
    participant I as Inngest
    participant A as AssemblyAI
    participant O as OpenAI
    participant D as Convex

    U->>N: Upload Ã¡udio ou YouTube URL
    N->>C: Verifica autenticaÃ§Ã£o
    C-->>N: âœ… Autorizado

    alt Upload de Ãudio
        N->>B: Salva arquivo
        B-->>N: URL do arquivo
        N->>I: Evento podcast/uploaded
        I->>A: Transcreve Ã¡udio
        A-->>I: TranscriÃ§Ã£o
    else Link do YouTube
        N->>P: Extrai transcriÃ§Ã£o
        P-->>N: TranscriÃ§Ã£o + metadata
        N->>I: Evento podcast/uploaded (com transcript)
        Note over I: Pula AssemblyAI
    end

    par GeraÃ§Ã£o Paralela
        I->>O: Gera Resumo
        I->>O: Gera Posts Sociais
        I->>O: Gera TÃ­tulos
        I->>O: Gera Hashtags
    end

    O-->>I: ConteÃºdo gerado
    I->>D: Salva resultados
    D-->>U: ğŸ”„ AtualizaÃ§Ã£o real-time
```

### Fluxo do UsuÃ¡rio

```mermaid
flowchart TD
    A[UsuÃ¡rio faz Upload do Ãudio ou Cola Link YouTube] --> B{Tipo de Input}
    B -->|Ãudio| C[Arquivo salvo no Vercel Blob]
    B -->|YouTube| D[Python Service extrai transcriÃ§Ã£o]
    C --> E[Evento Inngest Disparado]
    D --> E
    E --> F[Status: Processando]
    F -->|Ãudio| G[TranscriÃ§Ã£o AssemblyAI]
    F -->|YouTube| H[Usa transcriÃ§Ã£o jÃ¡ extraÃ­da]
    G --> I[GeraÃ§Ã£o de ConteÃºdo IA Paralela]
    H --> I
    I --> J[Resultados Salvos no Convex]
    J --> K[Status: Completo]
    K --> L[UsuÃ¡rio Visualiza Dashboard]
    L --> M[AtualizaÃ§Ãµes Real-time via Convex]
```

**Notas de Performance:**
- TranscriÃ§Ã£o (Ãudio): ~30-60 segundos via AssemblyAI
- TranscriÃ§Ã£o (YouTube): ~2-5 segundos (extraÃ§Ã£o direta)
- GeraÃ§Ã£o de ConteÃºdo IA (paralela): ~60 segundos
- **Tempo Total de Processamento: ~90-120 segundos (Ã¡udio) ou ~60-70 segundos (YouTube)**

---

### Arquitetura de Processamento Paralelo

```mermaid
flowchart TD
    A[TranscriÃ§Ã£o AssemblyAI Completa] --> B{Fan-out para Jobs Paralelos}
    B --> C[Gerar Resumo]
    B --> D[Gerar Posts Sociais]
    B --> E[Gerar TÃ­tulos]
    B --> F[Gerar Hashtags]
    B --> G[Gerar Timestamps YouTube]
    B --> H[Gerar Momentos-Chave]
    C --> I[Juntar Todos Resultados]
    D --> I
    E --> I
    F --> I
    G --> I
    H --> I
    I --> J[Salvar no Convex Database]
    J --> K[UI Atualiza em Real-time]
```

**Por Que Isso Importa:**
- **Sequencial**: 6 jobs Ã— 50s cada = ~300 segundos (5 minutos)
- **Paralelo**: Todos jobs rodam simultaneamente = ~60 segundos
- **Resultado**: 5x mais rÃ¡pido

---

### Arquitetura de Dados

```mermaid
flowchart LR
    A[Upload Cliente] --> B[Next.js API Route]
    B --> C[Clerk Auth Check]
    C --> D[Vercel Blob Storage]
    D --> E[Evento Inngest]
    E --> F[TranscriÃ§Ã£o AssemblyAI]
    E --> G[GeraÃ§Ã£o ConteÃºdo OpenAI]
    F --> H[Convex Database]
    G --> H
    H --> I[Subscription Real-time]
    I --> J[AtualizaÃ§Ã£o Dashboard]
```

---

## ğŸš€ ComeÃ§ando

### PrÃ©-requisitos

Antes de comeÃ§ar, certifique-se de ter:

- **Node.js 18+** e **pnpm** instalados
- Contas criadas para todos os serviÃ§os (veja seÃ§Ã£o de ConfiguraÃ§Ã£o abaixo)
- **Git** para controle de versÃ£o
- Um editor de cÃ³digo (VS Code recomendado)

### Passos de InstalaÃ§Ã£o

1. **Clone o repositÃ³rio**

```bash
git clone https://github.com/cienciadosdados/podcast.git
cd podcast
```

2. **Instale as dependÃªncias**

```bash
pnpm install
```

3. **Configure as variÃ¡veis de ambiente**

```bash
cp .env.example .env.local
```

Preencha todas as chaves necessÃ¡rias no `.env.local` (veja seÃ§Ã£o VariÃ¡veis de Ambiente abaixo).

4. **Inicie os serviÃ§os de desenvolvimento** (3 terminais)

**Terminal 1 - ServiÃ§o Python (YouTube):**
```bash
cd python-service
python -m venv venv
venv\Scripts\activate  # Windows
# source venv/bin/activate  # Linux/Mac
pip install flask youtube-transcript-api requests flask-cors
python app.py
```

**Terminal 2 - Next.js + Convex:**
```bash
pnpm dev
```

**Terminal 3 - Inngest Dev Server:**
```bash
npx inngest-cli@latest dev
```

5. **Abra seu navegador**

Navegue para `http://localhost:3000`

**URLs dos serviÃ§os:**
- App: http://localhost:3000
- Python Service: http://localhost:5000
- Inngest Dashboard: http://localhost:8288

---

### VariÃ¡veis de Ambiente

Crie um arquivo `.env.local` na raiz do projeto com as seguintes variÃ¡veis:

```bash
# Convex
CONVEX_DEPLOYMENT=dev:ai-podcast-saas-inngest-coderabbit-clerk
NEXT_PUBLIC_CONVEX_URL=https://your-project.convex.cloud

# Clerk
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_...
CLERK_SECRET_KEY=sk_test_...
CLERK_JWT_ISSUER_DOMAIN=your-domain.clerk.accounts.dev

# Vercel Blob
BLOB_READ_WRITE_TOKEN=vercel_blob_...

# Assembly AI
ASSEMBLYAI_API_KEY=...

# OpenAI
OPENAI_API_KEY=sk-proj-...

# Inngest
INNGEST_EVENT_KEY=...
INNGEST_SIGNING_KEY=signkey-prod-...

# YouTube Service (opcional - para desenvolvimento local)
YOUTUBE_SERVICE_URL=http://localhost:5000
```

**Notas de SeguranÃ§a:**

- âš ï¸ **NUNCA faÃ§a commit do `.env.local`** no controle de versÃ£o
- âœ… Use `.env.example` como template (seguro para commit)
- ğŸ”‘ VariÃ¡veis com prefixo `NEXT_PUBLIC_` sÃ£o expostas ao browser
- ğŸ”’ Outras variÃ¡veis sÃ£o apenas server-side

---

### ConfiguraÃ§Ã£o dos ServiÃ§os

#### 1. Clerk (AutenticaÃ§Ã£o & Billing)

1. Acesse [Clerk Dashboard](https://clerk.com)
2. Crie uma nova aplicaÃ§Ã£o
3. Copie suas chaves publishable e secret para `.env.local`
4. **Habilite Billing**:
   - VÃ¡ em "Billing" â†’ "Subscriptions"
   - Crie trÃªs planos: `free`, `pro`, `ultra`
   - Defina preÃ§os: Free ($0), Pro ($29/mÃªs), Ultra ($69/mÃªs)
5. **Configure Features** (use estes identificadores):
   - `summary` (Free, Pro, Ultra)
   - `social_posts` (Pro, Ultra)
   - `titles` (Pro, Ultra)
   - `hashtags` (Pro, Ultra)
   - `youtube_timestamps` (Ultra only)
   - `key_moments` (Ultra only)
   - `speaker_diarization` (Ultra only)

#### 2. Convex (Banco Real-time)

1. Acesse [Convex Dashboard](https://convex.dev)
2. Crie um novo projeto
3. Copie a URL de deployment para `.env.local`
4. O schema serÃ¡ auto-deployed quando rodar `pnpm convex dev`

#### 3. Vercel Blob (Storage de Arquivos)

1. Acesse [Vercel Dashboard](https://vercel.com)
2. Crie um novo projeto (ou use existente)
3. VÃ¡ em "Storage" â†’ "Create Database" â†’ "Blob"
4. Copie o `BLOB_READ_WRITE_TOKEN` para `.env.local`

#### 4. Inngest (OrquestraÃ§Ã£o de Workflows)

1. Acesse [Inngest Dashboard](https://inngest.com)
2. Crie um novo app
3. Copie Event Key e Signing Key para `.env.local`
4. **IMPORTANTE**: Use o domÃ­nio de **Settings â†’ Domains** do Vercel (nÃ£o URLs de deployment)
5. Em desenvolvimento, Inngest auto-descobre suas funÃ§Ãµes

#### 5. AssemblyAI (TranscriÃ§Ã£o)

1. Acesse [AssemblyAI Dashboard](https://www.assemblyai.com/dashboard)
2. Crie uma conta (tier gratuito disponÃ­vel)
3. Copie sua API key para `.env.local`
4. **PreÃ§o**: ~$0.00025/segundo (~$0.65 por hora de Ã¡udio)

#### 6. OpenAI (GeraÃ§Ã£o de ConteÃºdo IA)

1. Acesse [OpenAI Platform](https://platform.openai.com)
2. Crie uma API key
3. Adicione crÃ©ditos Ã  sua conta (pay-as-you-go)
4. Copie sua API key para `.env.local`
5. **Modelo Usado**: GPT-5-mini (~$0.05 por episÃ³dio de podcast)

#### 7. Python Service (YouTube - Desenvolvimento Local)

O serviÃ§o Python Ã© necessÃ¡rio apenas para desenvolvimento local da feature de YouTube.

1. Instale Python 3.8+
2. Navegue para `python-service/`
3. Crie um ambiente virtual e instale dependÃªncias:
```bash
python -m venv venv
venv\Scripts\activate  # Windows
pip install flask youtube-transcript-api requests flask-cors
```
4. Execute: `python app.py`
5. O serviÃ§o estarÃ¡ disponÃ­vel em `http://localhost:5000`

**Nota**: Para produÃ§Ã£o, o serviÃ§o Python precisa ser hospedado separadamente (Railway, Render, etc.)

---

### Checklist Primeira ConfiguraÃ§Ã£o

Antes de fazer upload do primeiro podcast, verifique:

- [ ] Todas variÃ¡veis de ambiente configuradas no `.env.local`
- [ ] ServiÃ§o Python rodando (`python app.py` na pasta `python-service/`)
- [ ] Next.js + Convex rodando (`pnpm dev`)
- [ ] Inngest Dev Server rodando (`npx inngest-cli@latest dev`)
- [ ] AplicaÃ§Ã£o Clerk configurada com planos de billing
- [ ] VocÃª consegue acessar o app em `http://localhost:3000`
- [ ] Teste upload com arquivo pequeno (menos de 10MB) ou link do YouTube

---

## ğŸ“Š VisÃ£o Geral do Schema

### Modelo Principal: Tabela `projects`

Toda a aplicaÃ§Ã£o gira em torno de uma Ãºnica tabela `projects` no Convex. Esta estrutura denormalizada permite atualizaÃ§Ãµes atÃ´micas e reatividade em tempo real.

**Campos Principais:**

| Campo | Tipo | DescriÃ§Ã£o |
|-------|------|-----------|
| `userId` | string | Clerk user ID (vincula projeto ao usuÃ¡rio) |
| `inputUrl` | string | URL Vercel Blob do arquivo uploaded |
| `status` | enum | `uploaded` â†’ `processing` â†’ `completed` ou `failed` |
| `jobStatus` | object | Status granular para `transcription` e `contentGeneration` |
| `transcript` | object | TranscriÃ§Ã£o completa com segmentos, speakers, capÃ­tulos |
| `summary` | object | Resumo gerado por IA com bullets, insights, TLDR |
| `socialPosts` | object | Posts especÃ­ficos por plataforma (Twitter, LinkedIn, etc.) |
| `titles` | object | SugestÃµes de tÃ­tulos (YouTube, podcast, SEO) |
| `hashtags` | object | RecomendaÃ§Ãµes de hashtags por plataforma |
| `youtubeTimestamps` | array | Marcadores de capÃ­tulo para descriÃ§Ãµes YouTube |
| `keyMoments` | array | Oportunidades de clips virais com timestamps |

**DecisÃµes de Design:**

- **Estrutura denormalizada** - Todos dados em um documento para atualizaÃ§Ãµes atÃ´micas
- **Campos opcionais** - Permitem populaÃ§Ã£o progressiva conforme jobs Inngest completam
- **Indexes** - Otimizam queries por usuÃ¡rio, status e data de criaÃ§Ã£o
- **Reatividade real-time** - Subscriptions Convex disparam atualizaÃ§Ãµes de UI automaticamente

**Indexes:**

- `by_user` - Lista todos projetos de um usuÃ¡rio
- `by_status` - Filtra por status de processamento
- `by_user_and_status` - Projetos ativos/completos do usuÃ¡rio
- `by_created_at` - Ordena por mais recente

---

## ğŸš€ Deploy

### Deploy na Vercel (Recomendado)

1. **Push seu cÃ³digo para GitHub**

```bash
git add .
git commit -m "Initial commit"
git push origin main
```

2. **Importe para Vercel**

- Acesse [Vercel Dashboard](https://vercel.com)
- Clique "Import Project"
- Selecione seu repositÃ³rio GitHub
- Vercel auto-detecta Next.js

3. **Adicione variÃ¡veis de ambiente**

No dashboard Vercel â†’ Settings â†’ Environment Variables, adicione todas variÃ¡veis do seu `.env.local`

4. **Deploy**

Vercel faz deploy automaticamente a cada push para `main`

5. **Configure domÃ­nio customizado** (opcional)

Settings â†’ Domains â†’ Adicione seu domÃ­nio

---

### Deploy via CLI

```bash
npx vercel --prod
```

Siga os prompts para fazer deploy.

---

### Checklist PÃ³s-Deploy

ApÃ³s fazer deploy em produÃ§Ã£o:

- [ ] Todas variÃ¡veis de ambiente configuradas no dashboard Vercel
- [ ] Ambiente de produÃ§Ã£o do Inngest configurado (separado do dev)
- [ ] InstÃ¢ncia de produÃ§Ã£o do Clerk conectada
- [ ] Atualizar `NEXT_PUBLIC_APP_URL` para sua URL de produÃ§Ã£o
- [ ] Testar upload em produÃ§Ã£o com arquivo pequeno
- [ ] Monitorar dashboard Inngest para erros de workflow
- [ ] Verificar logs Vercel para erros de runtime

---

### Monitoramento & Observabilidade

Fique de olho nestes dashboards:

- **Inngest Dashboard** - Logs de execuÃ§Ã£o, tentativas de retry, falhas
- **Convex Dashboard** - Queries de banco, mÃ©tricas de performance, conexÃµes real-time
- **Vercel Analytics** - TrÃ¡fego, page views, performance de edge functions
- **Clerk Dashboard** - Signups de usuÃ¡rios, assinaturas ativas, eventos de billing

---

## ğŸ› Problemas Comuns & SoluÃ§Ãµes

### Problemas de Desenvolvimento

#### Erro: Convex nÃ£o conecta

**Problema:** NÃ£o consegue conectar ao banco Convex

**SoluÃ§Ã£o:**
```bash
# Certifique-se que o Convex dev server estÃ¡ rodando em terminal separado
pnpm convex dev
```

#### Erro: Upload de arquivo falha

**Problema:** Upload retorna erro 400 ou 500

**SoluÃ§Ã£o:**
- Verifique se Vercel Blob estÃ¡ habilitado nas configuraÃ§Ãµes do projeto
- Confirme que `BLOB_READ_WRITE_TOKEN` estÃ¡ correto
- Verifique console do browser para erros de CORS

#### Erro: Inngest nÃ£o dispara

**Problema:** Arquivo faz upload mas processamento nunca inicia

**SoluÃ§Ã£o:**
- Verifique `INNGEST_EVENT_KEY` e `INNGEST_SIGNING_KEY` no `.env.local`
- Confirme que Inngest dev server estÃ¡ conectado (veja logs no terminal)
- Certifique-se que rota `/api/inngest` estÃ¡ acessÃ­vel
- **IMPORTANTE**: Use o domÃ­nio de **Settings â†’ Domains** do Vercel (nÃ£o URLs de deployment)

---

### Problemas de Banco de Dados

#### Projetos nÃ£o aparecem

**Problema:** UsuÃ¡rio faz upload mas nÃ£o vÃª no dashboard

**SoluÃ§Ã£o:**
- Verifique se Clerk `userId` corresponde ao `userId` do projeto no banco
- Confirme que Convex provider envolve seu app em `app/layout.tsx`
- Verifique console do browser para erros de conexÃ£o Convex

#### AtualizaÃ§Ãµes real-time nÃ£o funcionam

**Problema:** Dashboard nÃ£o atualiza automaticamente durante processamento

**SoluÃ§Ã£o:**
- Certifique-se que `ConvexProvider` envolve seu app
- Confirme que estÃ¡ usando `useQuery` (nÃ£o `fetchQuery`) para dados reativos
- Verifique dashboard Convex para problemas de conexÃ£o

---

### Problemas de AutenticaÃ§Ã£o

#### Loops de redirect Clerk

**Problema:** Preso em redirect infinito apÃ³s sign in

**SoluÃ§Ã£o:**
- Verifique se `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY` estÃ¡ correto
- Confira URLs de redirect corretas no dashboard Clerk
- Limpe cookies do browser e tente novamente

#### Billing nÃ£o funciona

**Problema:** UsuÃ¡rios nÃ£o conseguem fazer upgrade ou limites nÃ£o sÃ£o aplicados

**SoluÃ§Ã£o:**
- Configure planos no dashboard Clerk com identificadores corretos: `free`, `pro`, `ultra`
- Certifique-se que identificadores de features correspondem ao `tier-config.ts`
- Verifique configuraÃ§Ã£o de webhook Clerk para eventos de subscription

---

### Problemas de Processamento

#### GeraÃ§Ã£o IA travada

**Problema:** Projeto travado em status "processing"

**SoluÃ§Ã£o:**
- Verifique dashboard Inngest para logs de erro
- Confirme que `OPENAI_API_KEY` Ã© vÃ¡lida e tem crÃ©ditos
- Verifique pÃ¡gina de status da API OpenAI para outages

#### TranscriÃ§Ã£o falha

**Problema:** Step de transcriÃ§Ã£o falha imediatamente

**SoluÃ§Ã£o:**
- Verifique se `ASSEMBLYAI_API_KEY` Ã© vÃ¡lida
- Confirme que formato do arquivo Ã© suportado (MP3, MP4, WAV, etc.)
- Certifique-se que URL do arquivo Ã© publicamente acessÃ­vel
- Verifique dashboard AssemblyAI para limites de quota

#### Features de plano nÃ£o aplicam

**Problema:** UsuÃ¡rios free veem features Pro/Ultra

**SoluÃ§Ã£o:**
- Verifique se configuraÃ§Ã£o de planos Clerk corresponde ao `tier-config.ts`
- Confira lÃ³gica de detecÃ§Ã£o de plano em `lib/tier-utils.ts`
- Certifique-se que funÃ§Ã£o `has` Ã© chamada corretamente nas API routes

---

## ğŸ† PrÃ³ximos Passos - Desafios!

Quer evoluir este projeto? Aqui estÃ£o algumas features avanÃ§adas que vocÃª pode construir:

### Features AvanÃ§adas

- **ğŸ“„ Exportar para PDF/Google Doc** - Gerar relatÃ³rios PDF bonitos com todo conteÃºdo
- **ğŸ“… Agendamento de Redes Sociais** - IntegraÃ§Ã£o com Buffer ou Hootsuite para auto-posting
- **ğŸŒ Suporte Multi-idioma** - Transcrever e traduzir para 10+ idiomas
- **ğŸ¨ Presets de Tom de IA** - Permitir usuÃ¡rios definir voz da marca para geraÃ§Ã£o IA
- **ğŸ“¦ Processamento em Lote** - Upload de 10 episÃ³dios, processar todos durante a noite
- **ğŸ¥ GeraÃ§Ã£o de Video Clips** - Criar automaticamente video clips dos momentos-chave
- **ğŸ“Š Dashboard de Analytics** - Rastrear qual conteÃºdo performa melhor em cada plataforma

### Melhorias de IA

- **ğŸ§  Fine-tuning** - Treinar GPT no estilo especÃ­fico do podcast do usuÃ¡rio
- **ğŸ’¬ Prompts Customizados** - Permitir usuÃ¡rios escreverem seus prÃ³prios templates por plataforma
- **ğŸ˜Š AnÃ¡lise de Sentimento** - Tagar automaticamente momentos como engraÃ§ados, insightful, controversos
- **A/B Testing** - Gerar mÃºltiplas variaÃ§Ãµes de tÃ­tulo e rastrear qual performa melhor
- **ğŸ” RecomendaÃ§Ãµes de ConteÃºdo** - "Baseado neste episÃ³dio, vocÃª deveria falar sobre..."

### Infraestrutura & Escala

- **â˜ï¸ Cloudflare R2** - Migrar do Vercel Blob para storage mais barato a longo prazo
- **âš¡ Redis Caching** - Cache de projetos e transcriÃ§Ãµes frequentemente acessados
- **ğŸª NotificaÃ§Ãµes Webhook** - Alertar usuÃ¡rios via email/SMS quando processamento completa
- **ğŸ”§ Worker Service Separado** - Mover processamento pesado para infraestrutura dedicada
- **ğŸ“Š Analytics de Uso** - Rastrear custos por usuÃ¡rio para otimizaÃ§Ã£o de pricing

### Features de MonetizaÃ§Ã£o

- **ğŸ‘¥ Planos de Time** - Acesso multi-usuÃ¡rio com permissÃµes baseadas em roles
- **ğŸ·ï¸ OpÃ§Ã£o White-label** - Permitir agÃªncias rebrandar o app para seus clientes
- **ğŸ”Œ Acesso API** - Tier enterprise com REST API para automaÃ§Ã£o
- **ğŸ’³ Sistema de CrÃ©ditos** - Modelo pay-per-use ao invÃ©s de assinaturas
- **ğŸ Programa de Referral** - Recompensar usuÃ¡rios por trazer novos clientes

**Escolha uma feature e construa!** Depois compartilhe no programa AI CODE PRO da CiÃªncia dos Dados.

---

## ğŸ“„ LicenÃ§a

Este projeto Ã© licenciado sob a **Creative Commons Attribution-NonCommercial 4.0 International License (CC BY-NC 4.0)**.

### VocÃª PODE:

- âœ… Usar este cÃ³digo para **aprendizado pessoal** e educaÃ§Ã£o
- âœ… Modificar e adaptar o cÃ³digo para seus prÃ³prios projetos
- âœ… Compartilhar o cÃ³digo com outros (com atribuiÃ§Ã£o)
- âœ… Usar em seu **portfÃ³lio** (showcase nÃ£o-comercial)
- âœ… Fork, clone e experimentar com o codebase

### VocÃª NÃƒO PODE:

- âŒ Usar este cÃ³digo para **propÃ³sitos comerciais** (venda, SaaS, trabalho para clientes)
- âŒ Vender esta aplicaÃ§Ã£o ou derivados dela
- âŒ Remover atribuiÃ§Ã£o ao autor original
- âŒ Relicenciar o cÃ³digo sob termos diferentes

### Para Licenciamento Comercial

Interessado em usar este projeto comercialmente? Entre em contato:

- **LicenÃ§a Startup** - Para empresas em estÃ¡gio inicial
- **LicenÃ§a Enterprise** - Para empresas estabelecidas
- **LicenÃ§a White-label** - Direitos completos de customizaÃ§Ã£o para agÃªncias

**Contato:** Abra uma issue no GitHub ou entre em contato via [cienciadosdados.com](https://cienciadosdados.com)

Texto completo da licenÃ§a: [LICENSE.md](./LICENSE.md)

---

## ğŸ“š ReferÃªncia RÃ¡pida

### Comandos Ãšteis

```bash
# Desenvolvimento
pnpm dev          # Inicia Next.js dev server + Convex watch
pnpm build        # Build para produÃ§Ã£o
pnpm start        # Inicia servidor de produÃ§Ã£o
pnpm lint         # Roda Biome linter
pnpm format       # Formata cÃ³digo com Biome

# Convex
pnpm convex dev   # Inicia banco Convex de desenvolvimento
pnpm convex deploy # Deploy Convex para produÃ§Ã£o

# Deployment
npx vercel        # Deploy para Vercel (preview)
npx vercel --prod # Deploy para produÃ§Ã£o
```

---

### Conceitos Importantes

**Feature Gating por Plano**

Features sÃ£o habilitadas baseado no tier de assinatura Clerk do usuÃ¡rio:
- **Free**: Apenas Summary (3 projetos lifetime)
- **Pro**: + Social posts, titles, hashtags (30 projetos/mÃªs)
- **Ultra**: + YouTube timestamps, key moments, full transcript (ilimitado)

**Processamento Paralelo de IA**

Em vez de rodar tarefas de geraÃ§Ã£o IA sequencialmente (lento), Inngest roda 6 jobs em paralelo usando `Promise.allSettled`. Isso reduz tempo de processamento de ~5 minutos para ~60 segundos.

**AtualizaÃ§Ãµes Real-time**

Subscriptions Convex (`useQuery`) re-renderizam componentes automaticamente quando dados do banco mudam. Sem polling, sem refetch manual. Conforme Inngest atualiza status do projeto, UI atualiza instantaneamente.

**ExecuÃ§Ã£o DurÃ¡vel**

Inngest provÃª lÃ³gica de retry automÃ¡tico. Se OpenAI der timeout ou AssemblyAI falhar, o step faz retry com backoff exponencial. Seus usuÃ¡rios nunca perdem trabalho.

---

## ğŸ™ Agradecimentos

ConstruÃ­do com ferramentas incrÃ­veis de:
- [Clerk](https://clerk.com) - AutenticaÃ§Ã£o & Billing
- [Inngest](https://inngest.com) - OrquestraÃ§Ã£o de Workflows
- [Convex](https://convex.dev) - Banco Real-time
- [Vercel](https://vercel.com) - Deploy & Storage
- [AssemblyAI](https://www.assemblyai.com) - InteligÃªncia de Ãudio
- [OpenAI](https://platform.openai.com) - GeraÃ§Ã£o de ConteÃºdo IA

---

## ğŸ’¬ DÃºvidas ou Problemas?

- **Encontrou um bug?** Abra uma issue no GitHub
- **Precisa de ajuda?** Entre em contato via [cienciadosdados.com](https://cienciadosdados.com)
- **Quer contribuir?** PRs sÃ£o bem-vindos (veja LICENSE para termos)

---

**ConstruÃ­do com â¤ï¸ para a comunidade CiÃªncia dos Dados - AI CODE PRO Project 02**
